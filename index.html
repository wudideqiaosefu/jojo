<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="js/pixi.min.js"></script>
    <script>
		var app = new PIXI.Application(1000,600);
        document.body.appendChild(app.view);
        
        var bg = new PIXI.Sprite.fromImage("res/cha.jpg");
        app.stage.addChild(bg);
        var tong = new PIXI.Sprite.fromImage("res/tongzi.png");
        app.stage.addChild(tong);
        tong.height=175;
        tong.width=175;
        tong.x=825;
        bg.width=1000;
        bg.height=600;
        var start = new PIXI.Sprite.fromImage("res/start.png");
        app.stage.addChild(start);
        start.width=200;
        start.height=100;
        start.x=400;
        start.y=250;
        start.interactive=true;
        start.visible=true;

        var yezi = new PIXI.Sprite.fromImage("res/yezi.png");
            app.stage.addChild(yezi);

            yezi.anchor.set(0.5,0.5);
            yezi.x=Math.random()*(800-50)+50;
            yezi.y=Math.random()*(550-25)+25;
            yezi.width=100;
            yezi.height=50;
            yezi.interactive=true;
            yezi.visible=false;

        start.on("click",function(){
            start.visible=false;
            yezi.visible=true;  
        });


        yezi.on("click",function(){
            i=1;
        });


        var tiao = new PIXI.Sprite.fromImage("res/bg_front_02.png");
        app.stage.addChild(tiao);
        tiao.y=550;
        tiao.height=50;
        tiao.width=0;
        var i=0;
        
        app.ticker.add(animate);
        function animate(){
            if(tiao.width<1000)
            {
                if(yezi.x>900)
                {
                    i=0;
                    yezi.x=Math.random()*(800-50)+50;
                    yezi.y=Math.random()*(550-25)+25;
                    tiao.width+=100;
                }
            }
            if(i==1) {
                yezi.rotation+=Math.PI/12;
                yezi.x+=7*((1000-yezi.x)/Math.sqrt((1000-yezi.x)*(1000-yezi.x)+yezi.y*yezi.y));
                yezi.y-=7*(yezi.y/Math.sqrt((1000-yezi.x)*(1000-yezi.x)+yezi.y*yezi.y));
            }
            if(tiao.width>=1000)
            {
                yezi.visible=false;
                //做一个结束界面
                start.visible = true;
                tiao.width=0;
            }
        }
        
    </script>
</body>
</html>
